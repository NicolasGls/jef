"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),JEF=function(){function a(b){_classCallCheck(this,a),this.serv={},this.serv.viewSelector=b,this.serv.viewHTMLElement=document.querySelector(this.serv.viewSelector),this.serv.viewportWidth=this.getViewportSize().width,this.serv.viewportHeight=this.getViewportSize().height,this.modules={},this.controllers={},this.extensions={},this.broadcast={},this.serv.viewSeletorString=this.serv.viewSelector.replace("[",""),this.serv.viewSeletorString=this.serv.viewSeletorString.replace("]",""),window.__JEF__={view:b,instance:this}}return _createClass(a,[{key:"addExtension",value:function(a){var b=String("jef_"+a);this.extensions.hasOwnProperty(a)||(this.extensions[a]=window[b],this[a]=window[b])}},{key:"module",value:function(a,b){var c=!0,d=void 0;if("object"==typeof a&&(d=a,a=d.name,b=d.action,c=d.hasOwnProperty("reload")?d.reload:c),this.modules.hasOwnProperty(a))try{document.addEventListener("onload",this.modules[a](),!1)}catch(e){}else this.modules[a]=b,this.modules[a].reload=c,document.addEventListener("onload",this.modules[a](),!1)}},{key:"controller",value:function(a,b){if(this.controllers.hasOwnProperty(a)){if(String(this.serv.viewHTMLElement.getAttribute(this.serv.viewSeletorString))===String(a))try{document.addEventListener("onload",this.controllers[a](),!1)}catch(c){}}else this.controllers[a]=b,String(this.serv.viewHTMLElement.getAttribute(this.serv.viewSeletorString))===String(a)&&document.addEventListener("onload",this.controllers[a](),!1)}},{key:"init",value:function(){var a=void 0,b=void 0,c=0;for(a in this.modules)this.modules.hasOwnProperty(a)&&this.modules[a].reload&&this.modules[a]();for(b in this.controllers){if(this.controllers.hasOwnProperty(b))try{String(this.serv.viewHTMLElement.getAttribute(this.serv.viewSeletorString))===String(Object.keys(this.controllers)[c])&&this.controllers[b]()}catch(d){}c++}}},{key:"getViewportSize",value:function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}}]),a}();